import { Button } from "@mui/material";
import { LearnLayout } from "~/components/vn/learn/LearnLayout";

# Step 2: Plug the database

## Already familiar with Docker and Mongo?

If you have already used Mongo or Docker in the past, run this code in your terminal:

## Prerequesites

- Install Docker ([link for Ubuntu](https://docs.docker.com/engine/install/ubuntu/), [link for Mac](https://docs.docker.com/desktop/mac/install/)).
- (Optional) Install [Compass](https://www.mongodb.com/fr-fr/download-center/compass), the official tool to visualize your data

## Run Mongo

If Docker is installed, this magic command will either install and run, or just run Mongo on your computer.

```sh
yarn run mongo
```

You should already be able to access the database in Compass, using the following URI:

```
mongodb://localhost:27017/vulcan-next-app
```

## Link Mongo to your Vulcan application

Now, you'll want your Vulcan Next app to connect to this database.

To do so, you need to configure a global environment variable, `MONGO_URI`.
We are going to use [Next.js configuration features](https://blog.vulcanjs.org/how-to-set-configuration-variables-in-next-js-a81505e43dad).

```sh
# Duplicate ".env.development" to create a ".env.development.local"
cp .env.development .env.development.local
```

You can change the values of this `.env.development.local`: it
will only exist on your own computer, so you can even put password
and secret values here.

You'll find a line like this:

```
MONGO_URI="mongodb+srv://johnDoe:T74OcxqL15TRt7Zn@lbke-demo-ara2d.mongodb.net/sample_restaurants?retryWrites=true&w=majority"
# MONGO_URI="mongodb://localhost:27017/vulcan-next-app"
```

You can comment the first value, and uncomment the second one.
Now, Vulcan Next will use your local database.

## Go to step 3

<Button variant="contained" disabled={true}>
  TODO: reuse Steps code to detect if we have users
</Button>

export default function MongoPage(props) {
  return <LearnLayout {...props} />;
}
